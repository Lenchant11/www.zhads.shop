<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Online Arbeiten, Täglich Verdienen - Ohne Erfahrung | Jetzt Bewerben</title>
  <meta name="description" content="Arbeiten Sie von zu Hause ohne Erfahrung! Verdienen Sie bis zu 50 € pro Tag mit einfachen Aufgaben. Tägliche Auszahlungen. Flexible Arbeitszeiten. Jetzt bewerben, da Plätze begrenzt sind!" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Top Nav -->
  <header class="nav">
    <div class="container nav-inner">
      <a class="brand" href="#top" aria-label="Home">RemoteArbeit</a>
      <nav class="nav-links">
        <a href="#roles" class="nav-link">Positionen</a>
        <a href="#benefits" class="nav-link">Vorteile</a>
        <a href="#faq" class="nav-link">FAQ</a>
        <a href="#" class="btn btn-orange" id="openFormBtn">Jetzt bewerben</a>
      </nav>
    </div>
  </header>

  <!-- Hero + Form -->
  <section id="top" class="hero">
    <div class="container hero-grid">
      <div class="hero-copy fade-in">
        <span class="urgency-badge">BEGRENZTE PLÄTZE - JETZT BEWERBEN!</span>
        <h1>Online Arbeiten, Bis Zu 500 € Pro Tag Verdienen - Ohne Erfahrung!</h1>
        <p class="subtitle">
          Schließen Sie sich über 50.000 Deutschen an, die von zu Hause aus mit einfachen Aufgaben arbeiten. Verdienen Sie täglich mit flexiblen Arbeitszeiten, ohne Vorkenntnisse und mit garantierten täglichen Auszahlungen!
        </p>

        <!-- credibility logos -->
        <div class="logos" aria-label="Brands">
          <span class="logo" aria-label="Siemens" title="Siemens">Siemens</span>
          <span class="logo" aria-label="BMW" title="BMW">BMW</span>
          <span class="logo" aria-label="Deutsche Telekom" title="Deutsche Telekom">Telekom</span>
          <span class="logo" aria-label="Volkswagen" title="Volkswagen">Volkswagen</span>
          <span class="logo" aria-label="Bosch" title="Bosch">Bosch</span>
        </div>

        <ul class="hero-points">
          <li><strong>Überall arbeiten</strong> - von zu Hause, im Café, im Urlaub</li>
          <li><strong>Keine Erfahrung nötig</strong> - lernen Sie in 10 Minuten</li>
          <li><strong>Tägliche Auszahlungen</strong> - Geld täglich auf Ihr Konto</li>
          <li><strong>Flexible Arbeitszeiten</strong> - arbeiten Sie wann Sie wollen, sogar nur 1 Stunde täglich</li>
          <li><strong>Keine Kosten</strong> - keine Anmeldegebühren oder Provisionen</li>
        </ul>
      </div>

      <aside id="apply" class="form-card fade-in delay-1" aria-label="Bewerbungsformular">
        <div class="urgency-badge">NUR NOCH 12 PLÄTZE VERFÜGBAR</div>
        <h2 class="form-title">Starten Sie Noch Heute Mit Dem Verdienen!</h2>
        <p class="form-note">Füllen Sie das Formular aus und wir kontaktieren Sie innerhalb von 10 Minuten auf WhatsApp, um sofort mit der Arbeit zu beginnen!</p>
        
        <div class="progress-bar">
          <div class="progress-step active"></div>
          <div class="progress-step"></div>
          <div class="progress-step"></div>
        </div>

        <form id="applicationForm" novalidate>
          <div class="field">
            <label for="name">Vollständiger Name<span class="req">*</span></label>
            <input id="name" name="name" type="text" placeholder="Ihr vollständiger Name" required autocomplete="name" />
            <div class="error-message">Bitte geben Sie Ihren vollständigen Namen ein.</div>
          </div>

          <div class="field">
            <label for="phone">WhatsApp Telefonnummer<span class="req">*</span></label>
            <div class="phone-input-group">
              <div class="country-code">
                <img src="https://flagcdn.com/w20/de.png" alt="Deutsche Flagge" width="20" height="14" style="display:inline-block;vertical-align:middle;margin-right:8px;border-radius:2px;">
                +49
              </div>
              <input id="phone" name="phone" type="tel" class="phone-input" placeholder="15123456789" required inputmode="tel" pattern="[0-9+ ]*" />
            </div>
            <div class="error-message">Bitte geben Sie eine gültige deutsche Telefonnummer ohne Leerzeichen ein.</div>
          </div>

          <div class="field">
            <label for="age">Alter<span class="req">*</span></label>
            <input id="age" name="age" type="number" min="18" max="65" placeholder="z.B. 28" required />
            <div class="error-message">Bitte geben Sie ein Alter zwischen 18 und 65 Jahren ein.</div>
          </div>

          <div class="field check">
            <!-- REMOVED default checked for GDPR compliance -->
            <input id="consent" name="consent" type="checkbox" required style="width: auto; margin-top: 4px;" />
            <label for="consent">Ich akzeptiere die <a href="#privacy">Datenschutzerklärung</a> und die <a href="#terms">Nutzungsbedingungen</a>.</label>
          </div>

          <button type="submit" class="btn btn-orange btn-block pulse" id="submitBtn">KOSTENLOS STARTEN!</button>
          
          <div class="security-badge">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z" stroke="#19c37d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 12L11 14L15 10" stroke="#19c37d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Ihre Daten sind sicher und werden niemals an Dritte weitergegeben</span>
          </div>
          
          <p id="formStatus" class="form-status" role="status" aria-live="polite"></p>
        </form>
      </aside>
    </div>

    <div class="hero-bg" role="img" aria-label="Remote-Arbeitsszene: Frau benutzt ein Tablet zu Hause"></div>
  </section>

  <!-- Success Modal -->
  <div class="modal" id="successModal">
    <div class="modal-content" aria-labelledby="modalTitle" role="dialog" aria-modal="true">
      <button class="modal-close" id="modalCloseBtn" aria-label="Schließen">&times;</button>
      <h3 class="modal-title" id="modalTitle">Fantastisch!</h3>
      <p class="modal-message">Ihre Bewerbung wurde erfolgreich übermittelt! Klicken Sie auf OK, um sofort unseren Kundenservice auf WhatsApp zu kontaktieren und noch heute mit dem Verdienen zu beginnen.</p>
      <button class="modal-btn" id="modalOkBtn">OK, ICH MÖCHTE STARTEN!</button>
    </div>
  </div>

  <!-- Form Modal -->
  <div class="modal" id="formModal">
    <div class="modal-content" style="max-width: 500px;" aria-labelledby="modalFormTitle" role="dialog" aria-modal="true">
      <button class="modal-close" id="formModalCloseBtn" aria-label="Schließen">&times;</button>
      <div class="urgency-badge">BEGRENZTE PLÄTZE - JETZT BEWERBEN!</div>
      <h2 class="form-title" id="modalFormTitle">Jetzt bewerben</h2>
      <p class="form-note">Füllen Sie das Formular aus und wir kontaktieren Sie innerhalb von 10 Minuten auf WhatsApp, um sofort mit der Arbeit zu beginnen!</p>
      
      <div class="progress-bar">
        <div class="progress-step active"></div>
        <div class="progress-step"></div>
        <div class="progress-step"></div>
      </div>

      <form id="modalApplicationForm" novalidate>
        <div class="field">
          <label for="modal-name">Vollständiger Name<span class="req">*</span></label>
          <input id="modal-name" name="name" type="text" placeholder="Ihr vollständiger Name" required autocomplete="name" />
          <div class="error-message">Bitte geben Sie Ihren vollständigen Namen ein.</div>
        </div>

        <div class="field">
          <label for="modal-phone">WhatsApp Telefonnummer<span class="req">*</span></label>
          <div class="phone-input-group">
            <div class="country-code">
              <img src="https://flagcdn.com/w20/de.png" alt="Deutsche Flagge" width="20" height="14" style="display:inline-block;vertical-align:middle;margin-right:8px;border-radius:2px;">
              +49
            </div>
            <input id="modal-phone" name="phone" type="tel" class="phone-input" placeholder="15123456789" required inputmode="tel" pattern="[0-9+ ]*" />
          </div>
          <div class="error-message">Bitte geben Sie eine gültige deutsche Telefonnummer ohne Leerzeichen ein.</div>
        </div>

        <div class="field">
          <label for="modal-age">Alter<span class="req">*</span></label>
          <input id="modal-age" name="age" type="number" min="18" max="65" placeholder="z.B. 28" required />
          <div class="error-message">Bitte geben Sie ein Alter zwischen 18 und 65 Jahren ein.</div>
        </div>

        <div class="field check">
          <input id="modal-consent" name="consent" type="checkbox" required style="width: auto; margin-top: 4px;" />
          <label for="modal-consent">Ich akzeptiere die <a href="#privacy">Datenschutzerklärung</a> und die <a href="#terms">Nutzungsbedingungen</a>.</label>
        </div>

        <button type="submit" class="btn btn-orange btn-block pulse" id="modalSubmitBtn">KOSTENLOS STARTEN!</button>
        
        <div class="security-badge">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z" stroke="#19c37d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M9 12L11 14L15 10" stroke="#19c37d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Ihre Daten sind sicher und werden niemals an Dritte weitergegeben</span>
        </div>
        
        <p id="modalFormStatus" class="form-status" role="status" aria-live="polite"></p>
      </form>
    </div>
  </div>

  <!-- Hiring (Part-time & Full-time) -->
  <section id="roles" class="section">
    <div class="container">
      <div class="section-header fade-in">
        <h2>Wählen Sie, Wie Viel Sie Täglich Verdienen Möchten</h2>
        <p class="muted">Entscheiden Sie selbst, wie viel Zeit Sie investieren und wie viel Sie verdienen möchten. Die Auszahlungen sind täglich und garantiert!</p>
      </div>

      <div class="cards two-col">
        <article class="card fade-in">
          <div class="card-media media-pt"></div>
          <div class="card-body">
            <div class="earnings-badge">150-350 € / Tag</div>
            <h3>Teilzeit Arbeit</h3>
            <ul class="list">
              <li><strong>1-3 Stunden täglich</strong> - wann Sie wollen</li>
              <li><strong>Tägliche Auszahlung</strong> - Geld jeden Abend auf Ihrem Konto</li>
              <li><strong>Smartphone ausreichend</strong> - kein Computer nötig</li>
              <li><strong>Einfachste Aufgaben</strong> - keine Vorkenntnisse erforderlich</li>
              <li><strong>Ideal für Studenten, Mütter, Rentner</strong></li>
            </ul>
            <a href="#" class="btn btn-orange open-form-btn" style="margin-top: 14px;">TEILZEIT STARTEN</a>
          </div>
        </article>

        <article class="card fade-in delay-1">
          <div class="card-media media-ft"></div>
          <div class="card-body">
            <div class="earnings-badge">200-500 € / Tag</div>
            <h3>Vollzeit Arbeit</h3>
            <ul class="list">
              <li><strong>3-6 Stunden täglich</strong> - flexible Arbeitszeiten</li>
              <li><strong>Tägliche Auszahlung</strong> - garantierte Einnahmen</li>
              <li><strong>Smartphone oder Computer</strong> - wie Sie bevorzugen</li>
              <li><strong>Einfache aber mehr Aufgaben</strong></li>
              <li><strong>Ideal für stetiges Einkommen</strong></li>
            </ul>
            <a href="#" class="btn btn-orange open-form-btn" style="margin-top: 14px;">VOLLZEIT STARTEN</a>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Flexible Work Bonus -->
  <section class="section alt">
    <div class="container">
      <div class="section-header fade-in">
        <h2>Extra-Boni Für Kontinuierliche Arbeit</h2>
        <p class="muted">Zusätzlich zu Ihren normalen Einnahmen erhalten Sie Extra-Boni für Ihre Kontinuität!</p>
      </div>
      
      <div class="cards three-col">
        <div class="card bonus fade-in">
          <div class="bonus-icon" aria-hidden="true">🎁</div>
          <h3>5 Aktive Tage</h3>
          <p>10 € Extra-Bonus nach 5 Arbeitstagen diesen Monat.</p>
        </div>
        <div class="card bonus fade-in delay-1">
          <div class="bonus-icon" aria-hidden="true">🏆</div>
          <h3>15 Aktive Tage</h3>
          <p>25 € Extra-Bonus nach 15 Arbeitstagen diesen Monat.</p>
        </div>
        <div class="card bonus fade-in delay-2">
          <div class="bonus-icon" aria-hidden="true">⭐</div>
          <h3>30 Aktive Tage</h3>
          <p>50 € Extra-Bonus nach 30 Arbeitstagen diesen Monat.</p>
        </div>
      </div>
      <p class="muted" style="text-align: center; margin-top: 20px;">Boni sind für alle aktiven Mitarbeiter garantiert. Keine Überraschungen, nur Extra-Einnahmen!</p>
    </div>
  </section>

  <!-- Job Requirements -->
  <section class="section" aria-labelledby="req-title">
    <div class="container">
      <div class="section-header fade-in">
        <h2 id="req-title">Sie Benötigen Nur Dieses, Um Zu Starten</h2>
        <p class="muted">Einfachste Voraussetzungen, um sofort mit dem Verdienen zu beginnen.</p>
      </div>
      
      <div class="requirements">
        <div class="req-item fade-in">
          <div class="req-icon">📱</div>
          <div>
            <h4>Ein Smartphone</h4>
            <p>Android oder iPhone mit Internetverbindung.</p>
          </div>
        </div>
        <div class="req-item fade-in delay-1">
          <div class="req-icon">💸</div>
          <div>
            <h4>Lust Zu Verdienen</h4>
            <p>Keine Erfahrung, nur Motivation.</p>
          </div>
        </div>
        <div class="req-item fade-in delay-1">
          <div class="req-icon">🎯</div>
          <div>
            <h4>Alter 18+</h4>
            <p>Ab 18 Jahren, keine Altersgrenze nach oben.</p>
          </div>
        </div>
        <div class="req-item fade-in delay-2">
          <div class="req-icon">🤝</div>
          <div>
            <h4>Alle Willkommen</h4>
            <p>Frauen, Männer, Studenten, Rentner.</p>
          </div>
        </div>
        <div class="req-item fade-in delay-2">
          <div class="req-icon">⚡</div>
          <div>
            <h4>10 Minuten Pro Tag</h4>
            <p>Wenige Minuten reichen zum Lernen.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Work From Home Benefits -->
  <section id="benefits" class="section alt">
    <div class="container">
      <div class="benefits-grid">
        <div class="benefits-media fade-in"></div>
        <div class="benefits-copy fade-in delay-1">
          <h2>Arbeiten Sie Wirklich Stressfrei Von Zuhause</h2>
          <ul class="stats">
            <li><strong>50.000+</strong> Deutsche arbeiten bereits mit uns</li>
            <li><strong>100.000+</strong> Aufgaben monatlich erledigt</li>
            <li><strong>500+</strong> Personen im Support-Team</li>
            <li><strong>98%</strong> Zufriedenheit der Mitarbeiter</li>
          </ul>
          <p class="muted">Werden Sie Teil einer Gemeinschaft normaler Menschen, die täglich verdienen, ohne das Haus zu verlassen!</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials -->
  <section class="section">
    <div class="container">
      <div class="section-header fade-in">
        <h2>Was Unsere Mitarbeiter Sagen</h2>
        <p class="muted">Echte Menschen, echte Einnahmen, wahre Geschichten.</p>
      </div>
      
      <div class="cards three-col">
        <blockquote class="testimonial fade-in">
          <div class="avatar">A</div>
          <p>"Morgens erledige ich die Aufgaben beim Kaffee. Abends ist das Geld schon auf dem Konto. Endlich ein Job ohne Stress!"</p>
          <footer>— Anna, 32 Jahre, Berlin</footer>
        </blockquote>
        <blockquote class="testimonial fade-in delay-1">
          <div class="avatar">T</div>
          <p>"Ich arbeite nach meinem Hauptjob. Verdiene 300 € extra im Monat ohne Mühe. Wird Ihr Leben verändern!"</p>
          <footer>— Thomas, 45 Jahre, München</footer>
        </blockquote>
        <blockquote class="testimonial fade-in delay-2">
          <div class="avatar">H</div>
          <p>"Als Rentnerin bezahle ich mir damit Extras. Es ist einfach und hält mich geistig aktiv."</p>
          <footer>— Helga, 68 Jahre, Hamburg</footer>
        </blockquote>
      </div>
    </div>
  </section>

  <!-- Limited Opportunity -->
  <section class="section cta">
    <div class="container cta-inner fade-in">
      <div>
        <span class="urgency-badge">LETZTE CHANCE - PLÄTZE FAST VERGEBEN</span>
        <h2>Plätze Sind Begrenzt - Bewerben Sie Sich Jetzt!</h2>
        <p class="muted">Wir erhalten täglich hunderte Bewerbungen, können aber nur wenige neue Mitarbeiter aufnehmen. Senden Sie Ihre Bewerbung jetzt, bevor die Plätze vergeben sind!</p>
        
        <div class="countdown">
          <div class="countdown-item">
            <div class="countdown-number" id="countdown-hours">12</div>
            <div class="countdown-label">Stunden</div>
          </div>
          <div class="countdown-item">
            <div class="countdown-number" id="countdown-minutes">45</div>
            <div class="countdown-label">Minuten</div>
          </div>
          <div class="countdown-item">
            <div class="countdown-number" id="countdown-seconds">30</div>
            <div class="countdown-label">Sekunden</div>
          </div>
        </div>
      </div>
      <a class="btn btn-orange btn-lg pulse open-form-btn" href="#">JETZT BEWERBEN - PLÄTZE BEGRENZT!</a>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="section alt">
    <div class="container">
      <div class="section-header fade-in">
        <h2>Häufig Gestellte Fragen</h2>
        <p class="muted">Alles, was Sie wissen müssen, um sofort zu starten.</p>
      </div>
      
      <details class="faq fade-in">
        <summary>Was kostet die Bewerbung?</summary>
        <div>Absolut nichts! Wir verlangen niemals Geld für Ihre Bewerbung oder Anmeldung. Die Plattform ist komplett kostenlos.</div>
      </details>
      <details class="faq fade-in">
        <summary>Wann erhalte ich die Zahlungen?</summary>
        <div>Zahlungen werden täglich auf Ihr Bankkonto oder PayPal ausgezahlt. Sie erhalten das Geld innerhalb von 24 Stunden nach Aufgabenerfüllung.</div>
      </details>
      <details class="faq fade-in">
        <summary>Benötige ich Erfahrung?</summary>
        <div>Nein, absolut nicht! Wir bringen Ihnen alles in 10 Minuten bei. Die Aufgaben sind einfach und für jeden von 18 bis 80 Jahren geeignet.</div>
      </details>
      <details class="faq fade-in">
        <summary>Wie viel Zeit muss ich investieren?</summary>
        <div>Das entscheiden Sie! Sie können von 1 Stunde täglich bis zu 6 Stunden arbeiten. Mehr Zeit bedeutet mehr Einnahmen. Alles flexibel.</div>
      </details>
      <details class="faq fade-in">
        <summary>Wie werdet ihr mich kontaktieren?</summary>
        <div>Wir kontaktieren Sie innerhalb von 10 Minuten nach Ihrer Bewerbung auf WhatsApp. Sie erhalten sofort Anleitungen zum Start.</div>
      </details>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer-grid">
      <div>
        <a class="brand" href="#top">RemoteArbeit</a>
        <p class="muted small">Echte Chancen. Tägliche Einnahmen. Keine versteckten Kosten.</p>
      </div>
      <nav class="footer-links">
        <a id="privacy" href="privacy.html" rel="nofollow">Datenschutzerklärung</a>
        <a id="terms" href="userterms.html" rel="nofollow">Nutzungsbedingungen</a>
      </nav>
    </div>
    <div class="container">
      <p class="muted small">© 2024 RemoteArbeit. Alle Rechte vorbehalten. Die angezeigten Einnahmen sind Beispiele basierend auf den Erfahrungen unserer Mitarbeiter. Ihre tatsächlichen Einnahmen hängen von der investierten Zeit ab.</p>
    </div>
  </footer>

  <!-- Improved GA & Form Scripts -->
  <script>
    /**
     * Improved Google Tag snippet:
     * - define dataLayer & gtag before loading gtag.js (official pattern)
     * - load gtag.js dynamically afterwards
     */
    (function() {
      // define global dataLayer and gtag function synchronously
      window.dataLayer = window.dataLayer || [];
      function gtag(){ window.dataLayer.push(arguments); }
      window.gtag = gtag;

      // dynamically load the gtag script
      var gtagScript = document.createElement('script');
      gtagScript.async = true;
      gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=AW-17420620875';
      gtagScript.onload = function() {
        try {
          gtag('js', new Date());
          gtag('config', 'AW-17420620875');
          window.gaLoaded = true;
          retryPendingConversions();
          console.log('gtag loaded and configured');
        } catch (e) {
          console.warn('gtag initialization failed', e);
          window.gaLoaded = false;
        }
      };
      gtagScript.onerror = function() {
        console.warn('gtag script failed to load');
        window.gaLoaded = false;
      };
      document.head.appendChild(gtagScript);
    })();

    /**
     * reportGAConversion - improved multi-strategy implementation.
     * Returns a Promise<boolean> that resolves true if at least one method succeeded,
     * otherwise false (and stores a pending conversion in localStorage for retry).
     *
     * Strategy order:
     * 1) navigator.sendBeacon (if available) -> treat beacon success as "sent"
     * 2) Image pixel with onload/onerror callbacks
     * 3) gtag('event', 'conversion', ...) with event_callback (if gtag is available)
     *
     * The function waits up to 1000ms for a positive response from any method.
     */
    function reportGAConversion() {
      return new Promise(function(resolve) {
        var resolved = false;
        var timeoutMs = 1000;
        var timeoutHandle = null;

        function finish(success) {
          if (resolved) return;
          resolved = true;
          clearTimeout(timeoutHandle);
          if (!success) {
            storePendingConversion();
            console.log('GA conversion stored locally for retry');
          }
          resolve(success);
        }

        // timeout guard
        timeoutHandle = setTimeout(function() {
          // if nothing confirmed within timeout, treat as failure (store for retry)
          finish(false);
        }, timeoutMs);

        // 1) sendBeacon (best-effort)
        try {
          if (navigator.sendBeacon) {
            try {
              var beaconUrl = 'https://www.googleadservices.com/pagead/conversion/17420620875/';
              var bd = new FormData();
              bd.append('label', 'MKNhCN34158bEMuo5vJA');
              bd.append('guid', 'ON');
              // sendBeacon returns true if queued
              var sent = navigator.sendBeacon(beaconUrl, bd);
              if (sent) {
                console.log('GA conversion sent via Beacon API (queued)');
                // Accept this as success (beacon queued to browser)
                finish(true);
                return;
              } else {
                console.log('sendBeacon returned false, trying fallbacks');
              }
            } catch (err) {
              console.log('sendBeacon error, trying fallbacks', err);
            }
          }
        } catch (e) {
          console.log('sendBeacon not available', e);
        }

        // 2) Image pixel fallback (wait for onload/onerror)
        try {
          var pixel = new Image();
          var pixelUrl = 'https://www.googleadservices.com/pagead/conversion/17420620875/?label=MKNhCN34158bEMuo5vJA&guid=ON&script=0';
          pixel.onload = function() {
            console.log('GA conversion sent via image pixel (onload)');
            finish(true);
          };
          pixel.onerror = function() {
            console.log('Image pixel failed to load (error). Trying gtag if available.');
            // don't finish yet; wait for gtag attempt below
          };
          // set src after onload/onerror handlers
          pixel.src = pixelUrl;
        } catch (e) {
          console.log('Image pixel creation failed', e);
        }

        // 3) gtag event if available - use event_callback to detect success
        try {
          if (window.gaLoaded && typeof gtag === 'function') {
            try {
              // Provide event_callback to be invoked by gtag when it has processed the event.
              gtag('event', 'conversion', {
                'send_to': 'AW-17420620875/MKNhCN34158bEMuo5vJA',
                'transaction_id': '',
                'event_callback': function() {
                  try {
                    console.log('gtag reported conversion via event_callback');
                    finish(true);
                  } catch (e) {
                    console.log('gtag event_callback error', e);
                  }
                }
              });

              // As a safety, if gtag call doesn't trigger callback within timeout, the timeout guard will handle it.
            } catch (e) {
              console.log('gtag conversion call failed', e);
            }
          } else {
            console.log('gtag not ready for conversion event');
          }
        } catch (e) {
          console.log('gtag check failed', e);
        }

        // note: finish(false) will be invoked by timeout if nothing calls finish(true)
      });
    }

    // storePendingConversion (keeps last 10)
    function storePendingConversion() {
      try {
        var pending = JSON.parse(localStorage.getItem('ga_pending_conversions') || '[]');
        pending.push({
          timestamp: new Date().toISOString(),
          label: 'MKNhCN34158bEMuo5vJA',
          type: 'conversion'
        });
        if (pending.length > 10) pending = pending.slice(-10);
        localStorage.setItem('ga_pending_conversions', JSON.stringify(pending));
      } catch (e) {
        console.error('Failed to store pending conversion', e);
      }
    }

    // Retry pending conversions once gtag is available
    function retryPendingConversions() {
      try {
        var pending = JSON.parse(localStorage.getItem('ga_pending_conversions') || '[]');
        if (pending.length > 0 && window.gaLoaded && typeof gtag === 'function') {
          var successfulRetries = 0;
          // Try to send each via gtag (best-effort)
          pending.forEach(function(conversion) {
            try {
              gtag('event', 'conversion', {
                'send_to': 'AW-17420620875/' + conversion.label,
                'transaction_id': ''
              });
              successfulRetries++;
            } catch (e) {
              console.log('Failed to retry conversion:', conversion, e);
            }
          });
          // Clear stored list after attempt
          localStorage.removeItem('ga_pending_conversions');
          console.log('Successfully retried ' + successfulRetries + ' pending conversions');
        }
      } catch (e) {
        console.error('Failed to retry pending conversions', e);
      }
    }
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('applicationForm');
      const modalForm = document.getElementById('modalApplicationForm');
      const formStatus = document.getElementById('formStatus');
      const modalFormStatus = document.getElementById('modalFormStatus');
      const successModal = document.getElementById('successModal');
      const formModal = document.getElementById('formModal');
      const modalOkBtn = document.getElementById('modalOkBtn');
      const modalCloseBtn = document.getElementById('modalCloseBtn');
      const formModalCloseBtn = document.getElementById('formModalCloseBtn');
      const openFormBtn = document.getElementById('openFormBtn');
      const openFormBtns = document.querySelectorAll('.open-form-btn');
      const submitBtn = document.getElementById('submitBtn');
      const modalSubmitBtn = document.getElementById('modalSubmitBtn');
      
      // WhatsApp account array (company numbers - international format without +)
      const whatsappAccounts = [
        "4915213685454"
      ];
      
      // Funktion für WhatsApp-Link-Generierung (company contact)
      function generateWhatsAppLink(phoneNumber) {
        const message = encodeURIComponent("Hallo, ich interessiere mich für den Online-Teilzeitjob mit hohem Einkommen!");
        return `https://wa.me/${phoneNumber}?text=${message}`;
      }
      
      // Zufälligen Account zuweisen und Link generieren
      const randomAccount = whatsappAccounts[Math.floor(Math.random() * whatsappAccounts.length)];
      const assignedWhatsAppLink = generateWhatsAppLink(randomAccount);

      // Phone normalization helper:
      // Accepts forms like "+4915123...", "015123...", "15123..." and returns digits-only string without leading 0,
      // suitable to append to country code 49 when building full number.
      function normalizePhone(input) {
        if (!input) return '';
        // remove spaces, dashes, parentheses
        let s = input.replace(/[ \-\(\)]/g, '');
        // remove leading +
        if (s.startsWith('+')) s = s.slice(1);
        // if starts with 00 international prefix, strip it
        if (s.startsWith('00')) s = s.slice(2);
        // if starts with country code 49, keep as-is
        if (s.startsWith('49')) return s;
        // if starts with leading 0 (local format), remove that leading zero
        if (s.startsWith('0')) s = s.slice(1);
        // now s contains national number (without leading 0 or +), return s
        return s;
      }
      
      // Validierung: etwas toleranter - prüft nur, dass nach规范化 Zahlenlänge plausibel ist
      function validateGermanPhone(phone) {
        if (!phone) return false;
        // allow forms like "+4915123...", "015123...", "15123..."
        const normalized = normalizePhone(phone);
        // Typical mobile numbers in Germany after removing leading 0 are 10-12 digits (including area/mobile)
        return /^[0-9]{9,13}$/.test(normalized);
      }
      
      function validateAge(age) {
        const ageNum = parseInt(age);
        return !isNaN(ageNum) && ageNum >= 18 && ageNum <= 65;
      }
      
      function validateName(name) {
        return name && name.trim().length >= 2;
      }
      
      // Echtzeit-Validierung hinzufügen
      function addRealTimeValidation() {
        // Telefonnummer-Validierung
        const phoneInputs = document.querySelectorAll('input[name="phone"]');
        phoneInputs.forEach(input => {
          input.addEventListener('input', function() {
            if (this.value && !validateGermanPhone(this.value)) {
              this.classList.add('invalid');
            } else {
              this.classList.remove('invalid');
            }
          });
        });
        
        // Alter-Validierung
        const ageInputs = document.querySelectorAll('input[name="age"]');
        ageInputs.forEach(input => {
          input.addEventListener('input', function() {
            if (this.value && !validateAge(this.value)) {
              this.classList.add('invalid');
            } else {
              this.classList.remove('invalid');
            }
          });
        });
        
        // Name-Validierung
        const nameInputs = document.querySelectorAll('input[name="name"]');
        nameInputs.forEach(input => {
          input.addEventListener('input', function() {
            if (this.value && !validateName(this.value)) {
              this.classList.add('invalid');
            } else {
              this.classList.remove('invalid');
            }
          });
        });
      }
      
      // Modale Formular öffnen
      function openFormModal() {
        formModal.classList.add('active');
        // set focus to first input
        const first = formModal.querySelector('input[name="name"]');
        if (first) first.focus();
      }
      
      // Modale Formular schließen
      function closeFormModal() {
        formModal.classList.remove('active');
        openFormBtn && openFormBtn.focus();
      }
      
      // Erfolgsmodale öffnen
      function openSuccessModal() {
        successModal.classList.add('active');
        const close = successModal.querySelector('.modal-close');
        if (close) close.focus();
      }
      
      // Erfolgsmodale schließen
      function closeSuccessModal() {
        successModal.classList.remove('active');
        // return focus
        modalOkBtn && modalOkBtn.blur();
      }
      
      // 显示备选消息
      function showFallbackMessage(container, whatsappLink) {
        const fallbackHTML = `
          <div class="fallback-message" style="margin-top:12px;">
            <p>✅ Formular erfolgreich übermittelt! Wenn WhatsApp nicht automatisch geöffnet wurde:</p>
            <a href="${whatsappLink}" target="_blank" rel="noopener noreferrer" class="btn btn-orange fallback-link" style="display:inline-block;margin-top:8px;">
              📱 Hier klicken um WhatsApp manuell zu öffnen
            </a>
          </div>
        `;
        container.innerHTML = fallbackHTML;
      }
      
      // 优化的表单提交处理 - 把 window.open 放在用户触发的同步上下文中
      async function handleFormSubmit(e, formElement, statusElement, submitButton) {
        e.preventDefault();
        
        // 防止重复提交
        if (submitButton.disabled) return;
        
        // 禁用提交按钮
        submitButton.disabled = true;
        submitButton.textContent = 'Wird übermittelt...';
        
        // 清除之前的错误状态
        const inputs = formElement.querySelectorAll('input');
        inputs.forEach(input => {
          input.classList.remove('invalid');
        });
        
        const errorMessages = formElement.querySelectorAll('.error-message');
        errorMessages.forEach(msg => {
          msg.style.display = 'none';
        });
        
        let isValid = true;
        
        // 验证姓名
        const nameInput = formElement.querySelector('input[name="name"]');
        if (!validateName(nameInput.value)) {
          isValid = false;
          nameInput.classList.add('invalid');
          nameInput.nextElementSibling.style.display = 'block';
        }
        
        // 验证电话号码
        const phoneInput = formElement.querySelector('input[name="phone"]');
        if (!validateGermanPhone(phoneInput.value)) {
          isValid = false;
          phoneInput.classList.add('invalid');
          phoneInput.parentElement.nextElementSibling.style.display = 'block';
        }
        
        // 验证年龄
        const ageInput = formElement.querySelector('input[name="age"]');
        if (!validateAge(ageInput.value)) {
          isValid = false;
          ageInput.classList.add('invalid');
          ageInput.nextElementSibling.style.display = 'block';
        }
        
        // 验证同意条款
        const consentInput = formElement.querySelector('input[name="consent"]');
        if (!consentInput.checked) {
          isValid = false;
          formElement.querySelector('.field.check label').style.color = '#ff8b8b';
        } else {
          formElement.querySelector('.field.check label').style.color = '';
        }
        
        if (!isValid) {
          statusElement.textContent = 'Bitte füllen Sie alle Pflichtfelder korrekt aus.';
          statusElement.className = 'form-status error';
          
          // 重新启用按钮
          submitButton.disabled = false;
          submitButton.textContent = 'KOSTENLOS STARTEN!';
          return;
        }
        
        // 表单验证通过 - 立即同步打开 WhatsApp（用户手势上下文）
        // 使用分配好的 company account link（assignedWhatsAppLink）
        var whatsappWindow = null;
        try {
          whatsappWindow = window.open(assignedWhatsAppLink, '_blank', 'noopener');
          // if we get a window object, try to focus it
          if (whatsappWindow && typeof whatsappWindow.focus === 'function') {
            try { whatsappWindow.focus(); } catch (e) { /* ignore */ }
          }
        } catch (err) {
          console.warn('window.open threw', err);
        }

        // 同步打开后立即触发 GA 上报（异步，不阻塞 UI）
        try {
          reportGAConversion().then(function(conversionReported) {
            console.log('GA conversion reported (promise):', conversionReported);
          }).catch(function(err){
            console.log('GA conversion reporting error:', err);
          });
        } catch (e) {
          console.log('Failed to call reportGAConversion', e);
        }
        
        // 检查是否被阻止（500ms 后判断）
        setTimeout(() => {
          if (!whatsappWindow || whatsappWindow.closed || typeof whatsappWindow.closed === 'undefined') {
            // 显示备选方案
            showFallbackMessage(statusElement, assignedWhatsAppLink);
          }
        }, 500);
        
        // 显示成功消息
        statusElement.textContent = '✅ Erfolg! Ihr Formular wurde übermittelt. WhatsApp sollte sich jetzt öffnen.';
        statusElement.className = 'form-status success';
        
        // 如果是模态框表单，关闭模态框
        if (formElement === modalForm) {
          closeFormModal();
        }
        
        // 重置表单（推迟一点以免影响视觉）
        setTimeout(() => {
          try { formElement.reset(); } catch (e) {}
        }, 150);
        
        // 重新启用按钮（延迟一点）
        setTimeout(() => {
          submitButton.disabled = false;
          submitButton.textContent = 'KOSTENLOS STARTEN!';
        }, 2000);
      }
      
      // Event-Listener
      form.addEventListener('submit', function(e) {
        handleFormSubmit(e, form, formStatus, submitBtn);
      });
      
      modalForm.addEventListener('submit', function(e) {
        handleFormSubmit(e, modalForm, modalFormStatus, modalSubmitBtn);
      });
      
      openFormBtn.addEventListener('click', function(e) {
        e.preventDefault();
        openFormModal();
      });
      
      openFormBtns.forEach(btn => {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          openFormModal();
        });
      });
      
      // Modale Schließen-Buttons
      modalCloseBtn.addEventListener('click', closeSuccessModal);
      formModalCloseBtn.addEventListener('click', closeFormModal);
      
      // Modale durch Klicken auf den Hintergrund schließen
      successModal.addEventListener('click', function(e) {
        if (e.target === successModal) {
          closeSuccessModal();
        }
      });
      
      formModal.addEventListener('click', function(e) {
        if (e.target === formModal) {
          closeFormModal();
        }
      });
      
      // OK-Button im Erfolgsmodale - 直接打开WhatsApp（用户点击，因此不被阻止）
      modalOkBtn.addEventListener('click', function() {
        try {
          window.open(assignedWhatsAppLink, '_blank', 'noopener');
        } catch (e) {
          // ignore
        }
      });
      
      // 平滑滚动（保留）
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        if (anchor.getAttribute('href') !== '#' && 
            !anchor.classList.contains('open-form-btn') && 
            anchor.id !== 'openFormBtn') {
          anchor.addEventListener('click', function(e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;
            
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
              targetElement.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
              });
            }
          });
        }
      });
      
      // 启用实时验证
      addRealTimeValidation();
      
      // 交叉观察器动画（保留）
      const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.1
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('fade-in');
            observer.unobserve(entry.target);
          }
        });
      }, observerOptions);
      
      document.querySelectorAll('.fade-in').forEach(el => {
        observer.observe(el);
      });
      
      // 倒计时器（保留）
      function updateCountdown() {
        const now = new Date();
        const hours = 23 - now.getHours();
        const minutes = 59 - now.getMinutes();
        const seconds = 59 - now.getSeconds();
        
        document.getElementById('countdown-hours').textContent = hours.toString().padStart(2, '0');
        document.getElementById('countdown-minutes').textContent = minutes.toString().padStart(2, '0');
        document.getElementById('countdown-seconds').textContent = seconds.toString().padStart(2, '0');
      }
      
      // 初始化倒计时
      updateCountdown();
      setInterval(updateCountdown, 1000);
    });
  </script>
</body>
</html>
